<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>inside</title>
  <link rel="stylesheet" href="inside.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-content">
      <a href="inside.html" class="back-link">記事一覧へ戻る</a>
    </div>
  </nav>

  <main class="main-container">
    <article class="post-card" style="padding-bottom: 40px;">
      <div id="post-data">読み込み中...</div>
      
      <div id="disqus_thread"></div>
    </article>
  </main>

  <script>

    async function fetchPost() {
      const urlParams = new URLSearchParams(window.location.search);
      const postId = urlParams.get('id');
      if (!postId) return;

      try {
        const res = await fetch(`https://dductkh5s9.microcms.io/api/v1/blog/${postId}`, {
          headers: { "X-MICROCMS-API-KEY": "rZuCnNa7mF8FPM3vfIPKmLgtXBiLIlj2tflQ" }
        });
        const item = await res.json();
        document.getElementById("post-data").innerHTML = `
          <div class="post-date">${new Date(item.publishedAt).toLocaleDateString('ja-JP')}</div>
          <h1 class="post-title">${item.title}</h1>
          <div class="post-content">${item.content}</div>
        `;
        
      
        loadDisqus(postId);
      } catch (err) {
        document.getElementById("post-data").innerHTML = "読み込み失敗";
      }
    }

   
    function loadDisqus(postId) {
      var d = document, s = d.createElement('script');
      s.src = 'https://YOUR_SHORTNAME.disqus.com/embed.js'; // ★自分のShortnameを入れる
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    }

    fetchPost();
  </script>
</body>
</html>
